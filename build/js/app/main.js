"use strict";!function(e,t,i){e(function(){var n=e(window),o=function(e){return void 0!==e&&e.length},l=n.width(),s=new i(".main-slider",{loop:!0,loopedSlides:4,loopedAdditionalSlides:4,slidesPerView:1,grabCursor:!0}),r={init:l>1200,spaceBetween:4,centeredSlides:!0,slidesPerView:4,touchRatio:.2,slideToClickedSlide:!0,direction:"vertical",loop:!0,loopedSlides:4,loopedAdditionalSlides:4,controller:{control:s},on:{init:function(){l>1200&&(s.controller.control=this)},slideChangeTransitionEnd:function(){var e=this.snapIndex;(e+4>this.slides.length||e-4<0)&&this.slideTo(this.realIndex,0)}}},a={init:l<=1200,spaceBetween:4,slidesPerView:4,touchRatio:.2,slideToClickedSlide:!0,loop:!0,loopedSlides:4,loopedAdditionalSlides:4,controller:{control:s},on:{init:function(){n.width()<=1200&&(s.controller.control=this)}}},c=new i(".slider-desktop",r),d=new i(".slider-mobile",a),u=!1;n.resize(function(e){var t=e.currentTarget.innerWidth;t>1200&&u?(c.init(),s.controller.control=c,u=!1):t<=1200&&!u&&(d.init(),s.controller.control=d,u=!0)});var p=new i(".detail-gal",{loop:!0,loopedSlides:4,slidesPerView:1}),h=new i(".detail-gal-thumbs",{slidesPerView:"auto",touchRatio:.2,loop:!0,slideToClickedSlide:!0,loopedSlides:4,onSlideChangeEnd:function(e){8===e.activeIndex&&(e.update(!0),e.slideTo(0,0))}});p.params.control=h,h.params.control=p,e("#lang").selectmenu(),new i(".gallery",{slidesPerView:"auto"});var f=function(t){var i=e(t.currentTarget);i.val().length>0?i.addClass("text"):i.removeClass("text")};e(".form__input").on("change",f);var v=function(e){e.jfilestyle({buttonText:"Обзор",placeholder:"",inputSize:"calc(100% - 134px)"})};v(e('.js-file input[type="file"]'));new t("Modal",{attach:".js-popup",onInit:function(){e(document).on("click",".jBox-Modal .popup__button",this.close.bind(this))},onOpen:function(){var e=this.source,t=this.content,i=e.find(".popup-block");e.find('.js-file input[type="file"]').jfilestyle("destroy");var n=i.html();void 0!==n&&n.length?(i.remove(),this.setContent(n),t.find(".form__input").on("change",f),v(t.find('.js-file input[type="file"]'))):this.close()},onCloseComplete:function(){var e=this.content;e.find('.js-file input[type="file"]').jfilestyle("destroy");var t=e.html();e.find(".popup").remove(),this.source.append('<div class="popup-block">'+t+"</div>")}}),e(".js-popup").on("click",function(e){e.preventDefault()}),new t("Tooltip",{attach:".js-touch",trigger:"click",position:{x:"left",y:"top"},outside:"x",closeOnClick:"body",onOpen:function(){var t=e(this.source.data("target")).html();void 0!==t&&t.length?this.setContent(t):this.close()}}),e(".js-search").on("click",function(t){t.preventDefault(),e(t.currentTarget.dataset.target).toggleClass("show"),e(t.currentTarget).toggleClass("active")});var m=e("#mobile-menu");m.find("div.menu__item > span").on("click",function(t){var i=e(t.currentTarget).parent();i.toggleClass("open");var n=i.hasClass("open");i.children().each(function(t,i){var o=e(i);o.hasClass("mobile-sub")&&(o.slideToggle(n),o.find("div.menu__item").removeClass("open").find(".mobile-sub").removeAttr("style"))})});var g=e("html");e(".js-mobile").on("click",function(){g.toggleClass("menu-open")}),n.resize(function(e){var t=e.currentTarget.innerWidth,i=g.hasClass("menu-open");t>768&&i&&(g.removeClass("menu-open"),m.find("div.menu__item").removeClass("open"),m.find(".mobile-sub").removeAttr("style"))});var C=e(".js-reduce"),w=C.find(".mobile-reduce-second"),b=C.find('button[type="button"]');b.on("click",function(t){t.preventDefault();var i=e(t.currentTarget);w.is(":visible")?(w.hide(500),i.removeClass("show")):(w.show(500),i.addClass("show"))}),n.resize(function(){n.width()>480&&(w.removeAttr("style"),b.removeClass("show"))});var T=e(".timeline__item");if(o(T)){var y=function(){T.each(function(t,i){var n=e(i),l=n.find(".timeline__item-right").height(),s=n.find(".timeline__item-left > span");l>60?s.css({height:l-30}):o(s.attr("style"))&&s.removeAttr("style")})};y(),n.resize(function(e){e.currentTarget.innerWidth>480&&y()})}var j=e(".js-tabs");j.responsiveTabs({startCollapsed:"accordion",load:function(){j.responsiveTabs("activate",0)}}),e(".js-accordion").on("click",function(t){var i=e(t.currentTarget),n=i.hasClass("active");i.toggleClass("active",!n).parent().find(".accordion-hidden").slideToggle(n)})})}(jQuery,jBox,Swiper);